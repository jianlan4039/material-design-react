@use "sass:map";
@use "../../builder/tokens-builder";
@use "../../tokens/md-sys-color";
@use "../../tokens/md-sys-typescale";
@use "../../builder/forbidden-highlight";

$_default: (
  color: md-sys-color.values-light(),
  typescale: md-sys-typescale.values()
);

$support-tokens: (
  'icon-size',
  'icon-color',
  'active-icon-color',
  'label-font',
  'label-line-height',
  'label-size',
  'label-font-weight',
  'active-label-font-weight',
  'label-tracking',
  'label-color',
  'active-label-color',
  'gap'
);

$values: (
  'icon-size': 24px,
  'icon-color': map.get($_default, color, 'on-surface-variant'),
  'active-icon-color':map.get($_default, color, 'on-secondary-container'),
  'label-font': map.get($_default, 'typescale', 'label-medium-font'),
  'label-line-height': map.get($_default, 'typescale', 'label-medium-line-height'),
  'label-size': map.get($_default, 'typescale', 'label-medium-size'),
  'label-font-weight': map.get($_default, 'typescale', 'label-medium-weight'),
  'active-label-font-weight': map.get($_default, 'typescale', 'label-medium-weight-prominent'),
  'label-tracking': map.get($_default, 'typescale', 'label-medium-tracking'),
  'label-color': map.get($_default, 'color', 'on-surface-variant'),
  'active-label-color': map.get($_default, 'color', 'on-surface'),
  'gap': 8px,
);

@mixin theme($tokens) {
  @include tokens-builder.theme($tokens, $support-tokens, navigation-action);
}

@mixin styles() {
  .navigation-action {
    @include tokens-builder.tokens($values, navigation-action);
    @include forbidden-highlight.no-highlight;
    position: relative;
    display: flex;
    inline-size: fit-content;
    block-size: 56px;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: default;
    gap: var(--md-navigation-action-gap);

    .icon {
      color: var(--md-navigation-action-icon-color);
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .icon, .icon > * {
      font-size: var(--md-navigation-action-icon-size);
    }

    .label {
      font-family: var(--md-navigation-action-label-font), serif;
      font-size: var(--md-navigation-action-label-size);
      font-weight: var(--md-navigation-action-label-font-weight);
      line-height: var(--md-navigation-action-label-line-height);
      color: var(--md-navigation-action-label-color);
    }

    .navigation-indicator {
      inset-block-start: 0;
    }

    &.active {
      .icon {
        color: var(--md-navigation-action-active-icon-color);
      }

      .label {
        color: var(--md-navigation-action-active-label-color);
        font-weight: var(--md-navigation-action-active-font-weight);
      }
    }
  }
}